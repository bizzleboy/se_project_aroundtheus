!function(){"use strict";var e="",t=class{constructor(e,t,n){let{handleImageClick:i}=n;this._name=e.name,this._link=e.link,this._popUpElement=t,this._handleImageClick=i}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLikeIcon.bind(this)),this._deleteButton.addEventListener("click",this._deleteCard.bind(this)),this._cardImage.addEventListener("click",(()=>this._handleImageClick(this._name,this._link)))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-active")}_deleteCard(){this._element.remove(),this._element=null}_getTemplate(){return document.querySelector(this._popUpElement).content.querySelector(".card").cloneNode(!0)}getElement(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like"),this._deleteButton=this._element.querySelector(".card__delete"),this._cardImage=this._element.querySelector(".card__image"),this._setEventListeners(),this._cardImage.src=this._link,this._cardImage.alt=`photo of ${this._name}`,this._element.querySelector(".card__text").textContent=this._name,this._element}},n=class{constructor(e,t){this._invalidInput=e.invalidInput,this._activateError=e.activateError,this._formTypeError=e.formTypeError,this._inactiveButton=e.inactiveButton,this._modalInput=e.modalInput,this._modalButton=e.modalButton,this._modalForm=e.modalForm,this._formElement=t}_showInputError(e,t){const n=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._invalidInput),n.textContent=t,n.classList.add(this._activateError)}_hideInputError(e,t){const n=this._formElement.querySelector(`.${e.id}-error`);n.classList.remove(this._activateError),e.classList.remove(this._invalidInput),n.textContent=""}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButton),this._buttonElement.disabled=!0):(this._buttonElement.disabled=!1,this._buttonElement.classList.remove(this._inactiveButton))}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._modalInput)),this._buttonElement=this._formElement.querySelector(this._modalButton),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}};class i{constructor(e){let{selector:t}=e;var n,i,r;n=this,r=e=>{"Escape"===e.key&&this.close()},(i=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(i="_handleEscClose"))in n?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this._popUpElement=document.querySelector(t)}open(){this._popUpElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popUpElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleOverlayClick(e){e.target.classList.contains("modal")&&this.close()}setEventListeners(){this._popUpElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popUpElement.addEventListener("mousedown",(e=>{this._handleOverlayClick(e)}))}}class r extends i{constructor(e,t){super({selector:e}),this._handleFormSubmit=t,this._popupForm=this._popUpElement.querySelector(".modal__form")}_getInputValues(){const e=Array.from(this._popupForm.querySelectorAll(".modal__input")),t={};return e.forEach((e=>{t[e.name]=e.value})),t}close(){this._popupForm.reset(),super.close()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}var s=e+"4e8e0a1d604782a0dff8.svg",o=e+"1fb0ce54682a4a93df2b.jpg",l=e+"81d0f6a6ee1da3d7d7d2.svg",a=e+"9593ef0d1ec14be53933.jpg",d=e+"06cdee73d70ab890e655.png",c=e+"ec2f35af0a0b741d8ba8.png",u=e+"6fee62dadeb5c8ad05bd.png",m=e+"1e74cfe900aa3d227b1c.png",_=e+"ef8a240d9b1c663bca46.png";document.getElementById("logo").src=s,document.getElementById("profpic").src=o,document.getElementById("preview-close").src=l,document.getElementById("edit-close").src=l,document.getElementById("add-close").src=l;const h=[{name:"Yosemite Valley",link:a},{name:"Lake Louise",link:d},{name:"Bald Mountains",link:c},{name:"Latemar",link:u},{name:"Vanoise National Park",link:m},{name:"Lago Di Braies",link:_}],p=(document.querySelector(".cards"),document.querySelector("#add-form")),v=document.querySelector("#edit-form"),E=document.querySelector(".profile__edit"),f=document.querySelector(".profile__add"),y=document.querySelector("#subtitle"),g=document.querySelector(".modal__input"),b=(document.querySelector("#title"),document.querySelector("#link"),document.querySelector(".profile__name"),document.querySelector(".profile__subtitle"),"#card__template"),I=new class{constructor(e){let{userName:t,userJob:n}=e;this.userName=document.querySelector(t),this.userJob=document.querySelector(n)}getUserInfo(){return{name:this.userName.textContent,job:this.userJob.textContent}}setUserInfo(e,t){this.userName.textContent=e,this.userJob.textContent=t}}({userName:".profile__name",userJob:".profile__subtitle"}),L={invalidInput:"modal__input-invalid",activateError:"form__input-error_active",formTypeError:"form__input_type_error",inactiveButton:"modal__button-inactive",modalInput:".modal__input",modalButton:".modal__button",modalForm:".modal__form"},k=new n(L,v),S=new n(L,p);k.enableValidation(),S.enableValidation();const q=new r("#edit",(e=>{I.setUserInfo(e.name,e.subtitle),q.close()})),B=new r("#add",(e=>{const t=w({name:e.title,link:e.link});U.addItem(t),B.close()}));B.setEventListeners(),q.setEventListeners();const C=new class extends i{constructor(e){super({selector:e}),this._caption=this._popUpElement.querySelector(".modal__caption"),this._image=this._popUpElement.querySelector(".modal__preview-image")}open(e,t){this._caption.textContent=e,this._image.src=t,this._image.alt="photo of "+e,super.open()}}("#preview");function w(e){return new t(e,b,{handleImageClick:(e,t)=>{C.open(e,t)}}).getElement()}C.setEventListeners();const U=new class{constructor(e,t){let{items:n,renderer:i}=e;this._renderedItems=n,this._renderer=i,this._container=document.querySelector(t)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:h,renderer:e=>{const t=w(e);U.addItem(t)}},".cards");U.renderItems(),E.addEventListener("click",(()=>{k.resetValidation(),function(){const{name:e,job:t}=I.getUserInfo();g.setAttribute("value",e),y.setAttribute("value",t)}(),q.open()})),f.addEventListener("click",(()=>{S.resetValidation(),B.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQ0EsSUFBSUEsRUNEb0IsR0MrQ3hCLEVBL0NBLE1BQ0VDLFlBQVlDLEVBQU1DLEVBQVFDLEdBQXdCLElBQXRCLGlCQUFFQyxHQUFrQkQsRUFDOUNFLEtBQUtDLE1BQVFMLEVBQUtNLEtBQ2xCRixLQUFLRyxNQUFRUCxFQUFLUSxLQUNsQkosS0FBS0ssY0FBZ0JSLEVBQ3JCRyxLQUFLTSxrQkFBb0JQLENBQzNCLENBRUFRLHFCQUNFUCxLQUFLUSxZQUFZQyxpQkFBaUIsUUFBU1QsS0FBS1UsZ0JBQWdCQyxLQUFLWCxPQUNyRUEsS0FBS1ksY0FBY0gsaUJBQWlCLFFBQVNULEtBQUthLFlBQVlGLEtBQUtYLE9BQ25FQSxLQUFLYyxXQUFXTCxpQkFBaUIsU0FBUyxJQUN4Q1QsS0FBS00sa0JBQWtCTixLQUFLQyxNQUFPRCxLQUFLRyxRQUU1QyxDQUVBTyxrQkFDRVYsS0FBS1EsWUFBWU8sVUFBVUMsT0FBTyxvQkFDcEMsQ0FFQUgsY0FDRWIsS0FBS2lCLFNBQVNDLFNBQ2RsQixLQUFLaUIsU0FBVyxJQUNsQixDQUVBRSxlQUNFLE9BQU9DLFNBQ0pDLGNBQWNyQixLQUFLSyxlQUNuQmlCLFFBQVFELGNBQWMsU0FDdEJFLFdBQVUsRUFDZixDQUNBQyxhQWFFLE9BWkF4QixLQUFLaUIsU0FBV2pCLEtBQUttQixlQUVyQm5CLEtBQUtRLFlBQWNSLEtBQUtpQixTQUFTSSxjQUFjLGVBQy9DckIsS0FBS1ksY0FBZ0JaLEtBQUtpQixTQUFTSSxjQUFjLGlCQUNqRHJCLEtBQUtjLFdBQWFkLEtBQUtpQixTQUFTSSxjQUFjLGdCQUU5Q3JCLEtBQUtPLHFCQUVMUCxLQUFLYyxXQUFXVyxJQUFNekIsS0FBS0csTUFDM0JILEtBQUtjLFdBQVdZLElBQU8sWUFBVzFCLEtBQUtDLFFBQ3ZDRCxLQUFLaUIsU0FBU0ksY0FBYyxlQUFlTSxZQUFjM0IsS0FBS0MsTUFFdkRELEtBQUtpQixRQUNkLEdDd0NGLEVBckZBLE1BQ0V0QixZQUFZaUMsRUFBZ0JDLEdBQzFCN0IsS0FBSzhCLGNBQWdCRixFQUFlRyxhQUNwQy9CLEtBQUtnQyxlQUFpQkosRUFBZUssY0FDckNqQyxLQUFLa0MsZUFBaUJOLEVBQWVPLGNBQ3JDbkMsS0FBS29DLGdCQUFrQlIsRUFBZVMsZUFDdENyQyxLQUFLc0MsWUFBY1YsRUFBZVcsV0FDbEN2QyxLQUFLd0MsYUFBZVosRUFBZWEsWUFDbkN6QyxLQUFLMEMsV0FBYWQsRUFBZWUsVUFFakMzQyxLQUFLNEMsYUFBZWYsQ0FDdEIsQ0FFQWdCLGdCQUFnQkMsRUFBY0MsR0FDNUIsTUFBTUMsRUFBZWhELEtBQUs0QyxhQUFhdkIsY0FDcEMsSUFBR3lCLEVBQWFHLFlBRW5CSCxFQUFhL0IsVUFBVW1DLElBQUlsRCxLQUFLOEIsZUFDaENrQixFQUFhckIsWUFBY29CLEVBQzNCQyxFQUFhakMsVUFBVW1DLElBQUlsRCxLQUFLZ0MsZUFDbEMsQ0FFQW1CLGdCQUFnQkwsRUFBY0MsR0FDNUIsTUFBTUMsRUFBZWhELEtBQUs0QyxhQUFhdkIsY0FDcEMsSUFBR3lCLEVBQWFHLFlBR25CRCxFQUFhakMsVUFBVUcsT0FBT2xCLEtBQUtnQyxnQkFDbkNjLEVBQWEvQixVQUFVRyxPQUFPbEIsS0FBSzhCLGVBQ25Da0IsRUFBYXJCLFlBQWMsRUFDN0IsQ0FFQXlCLG1CQUNFLE9BQU9wRCxLQUFLcUQsV0FBV0MsTUFBTVIsSUFDbkJBLEVBQWFTLFNBQVNDLE9BRWxDLENBRUFDLG9CQUFvQlgsR0FDYkEsRUFBYVMsU0FBU0MsTUFHekJ4RCxLQUFLbUQsZ0JBQWdCTCxHQUZyQjlDLEtBQUs2QyxnQkFBZ0JDLEVBQWNBLEVBQWFZLGtCQUlwRCxDQUVBQyxxQkFDTTNELEtBQUtvRCxvQkFDUHBELEtBQUs0RCxlQUFlN0MsVUFBVW1DLElBQUlsRCxLQUFLb0MsaUJBRXZDcEMsS0FBSzRELGVBQWVDLFVBQVcsSUFFL0I3RCxLQUFLNEQsZUFBZUMsVUFBVyxFQUMvQjdELEtBQUs0RCxlQUFlN0MsVUFBVUcsT0FBT2xCLEtBQUtvQyxpQkFFOUMsQ0FFQTdCLHFCQUNFUCxLQUFLcUQsV0FBYVMsTUFBTUMsS0FDdEIvRCxLQUFLNEMsYUFBYW9CLGlCQUFpQmhFLEtBQUtzQyxjQUUxQ3RDLEtBQUs0RCxlQUFpQjVELEtBQUs0QyxhQUFhdkIsY0FBY3JCLEtBQUt3QyxjQUUzRHhDLEtBQUtxRCxXQUFXWSxTQUFTbkIsSUFDdkJBLEVBQWFyQyxpQkFBaUIsU0FBUyxLQUNyQ1QsS0FBS3lELG9CQUFvQlgsR0FDekI5QyxLQUFLMkQsb0JBQW9CLEdBQ3pCLEdBRU4sQ0FDQU8sbUJBQ0VsRSxLQUFLNEMsYUFBYW5DLGlCQUFpQixVQUFXMEQsSUFDNUNBLEVBQUlDLGdCQUFnQixJQUV0QnBFLEtBQUtPLG9CQUNQLENBQ0E4RCxrQkFDRXJFLEtBQUsyRCxxQkFFTDNELEtBQUtxRCxXQUFXWSxTQUFTbkIsSUFDdkI5QyxLQUFLbUQsZ0JBQWdCTCxFQUFhLEdBRXRDLEdDbEZhLE1BQU13QixFQUNuQjNFLFlBQVdHLEdBQWUsSUFBZCxTQUFFRCxHQUFVQyxFLFlBQUEsSyxFQVlMcUUsSUFDRCxXQUFaQSxFQUFJSSxLQUNOdkUsS0FBS3dFLE9BQ1AsRywrU0Fmc0Isc0Isd0ZBQ3RCeEUsS0FBS0ssY0FBZ0JlLFNBQVNDLGNBQWN4QixFQUM5QyxDQUNBNEUsT0FDRXpFLEtBQUtLLGNBQWNVLFVBQVVtQyxJQUFJLGdCQUVqQzlCLFNBQVNYLGlCQUFpQixRQUFTVCxLQUFLMEUsZ0JBQzFDLENBQ0FGLFFBQ0V4RSxLQUFLSyxjQUFjVSxVQUFVRyxPQUFPLGdCQUNwQ0UsU0FBU3VELG9CQUFvQixRQUFTM0UsS0FBSzBFLGdCQUM3QyxDQU9BRSxvQkFBb0JULEdBQ2RBLEVBQUlVLE9BQU85RCxVQUFVK0QsU0FBUyxVQUNoQzlFLEtBQUt3RSxPQUVULENBQ0FPLG9CQUNzQi9FLEtBQUtLLGNBQWNnQixjQUFjLGlCQUN6Q1osaUJBQWlCLFNBQVMsS0FDcENULEtBQUt3RSxPQUFPLElBRWR4RSxLQUFLSyxjQUFjSSxpQkFBaUIsYUFBYzBELElBQ2hEbkUsS0FBSzRFLG9CQUFvQlQsRUFBSSxHQUVqQyxFQzlCYSxNQUFNYSxVQUFzQlYsRUFDekMzRSxZQUFZc0YsRUFBZUMsR0FDekJDLE1BQU0sQ0FBRXRGLFNBQVVvRixJQUVsQmpGLEtBQUtvRixrQkFBb0JGLEVBRXpCbEYsS0FBS3FGLFdBQWFyRixLQUFLSyxjQUFjZ0IsY0FBYyxlQUNyRCxDQUVBaUUsa0JBQ0UsTUFBTUMsRUFBWXpCLE1BQU1DLEtBQ3RCL0QsS0FBS3FGLFdBQVdyQixpQkFBaUIsa0JBRzdCcEUsRUFBTyxDQUFDLEVBS2QsT0FKQTJGLEVBQVV0QixTQUFTdUIsSUFDakI1RixFQUFLNEYsRUFBTXRGLE1BQVFzRixFQUFNQyxLQUFLLElBR3pCN0YsQ0FDVCxDQUVBNEUsUUFDRXhFLEtBQUtxRixXQUFXSyxRQUNoQlAsTUFBTVgsT0FDUixDQUVBTyxvQkFDRUksTUFBTUosb0JBQ04vRSxLQUFLcUYsV0FBVzVFLGlCQUFpQixVQUFXMEQsSUFDMUNBLEVBQUlDLGlCQUNKcEUsS0FBS29GLGtCQUFrQnBGLEtBQUtzRixrQkFBa0IsR0FFbEQsRSwyUkNoQmdCbEUsU0FBU3VFLGVBQWUsUUFFaENsRSxJQUFNbUUsRUFFT3hFLFNBQVN1RSxlQUFlLFdBQ2hDbEUsSUFBTW9FLEVBRUF6RSxTQUFTdUUsZUFBZSxpQkFDaENsRSxJQUFNK0MsRUFFRHBELFNBQVN1RSxlQUFlLGNBQ2hDbEUsSUFBTStDLEVBRUNwRCxTQUFTdUUsZUFBZSxhQUNoQ2xFLElBQU0rQyxFQWFmLE1BNkJNc0IsRUFBZSxDQTdCUCxDQUNaNUYsS0FBTSxrQkFDTkUsS0FBTTJGLEdBR00sQ0FDWjdGLEtBQU0sY0FDTkUsS0FBTTRGLEdBR00sQ0FDWjlGLEtBQU0saUJBQ05FLEtBQU02RixHQUdNLENBQ1ovRixLQUFNLFVBQ05FLEtBQU04RixHQUdNLENBQ1poRyxLQUFNLHdCQUNORSxLQUFNK0YsR0FHTSxDQUNaakcsS0FBTSxpQkFDTkUsS0FBTWdHLElBVUZDLEdBTmlCakYsU0FBU0MsY0FBYyxVQU12QkQsU0FBU0MsY0FBYyxjQUV4Q2lGLEVBQWtCbEYsU0FBU0MsY0FBYyxjQU96Q2tGLEVBQTBCbkYsU0FBU0MsY0FBYyxrQkFFakRtRixFQUFZcEYsU0FBU0MsY0FBYyxpQkFPbkNvRixFQUFnQnJGLFNBQVNDLGNBQWMsYUFFdkNxRixFQUFpQnRGLFNBQVNDLGNBQWMsaUJBa0J4Q3NGLEdBaEJrQnZGLFNBQVNDLGNBQWMsVUFFeEJELFNBQVNDLGNBQWMsU0FNMUJELFNBQVNDLGNBQWMsa0JBQ3RCRCxTQUFTQyxjQUFjLHNCQU92QixtQkFNZnVGLEVBQVcsSUMvSEYsTUFDYmpILFlBQVdHLEdBQXdCLElBQXZCLFNBQUUrRyxFQUFRLFFBQUVDLEdBQVNoSCxFQUMvQkUsS0FBSzZHLFNBQVd6RixTQUFTQyxjQUFjd0YsR0FDdkM3RyxLQUFLOEcsUUFBVTFGLFNBQVNDLGNBQWN5RixFQUN4QyxDQUVBQyxjQUNFLE1BQU8sQ0FBRTdHLEtBQU1GLEtBQUs2RyxTQUFTbEYsWUFBYXFGLElBQUtoSCxLQUFLOEcsUUFBUW5GLFlBQzlELENBRUFzRixZQUFZQyxFQUFTQyxHQUNuQm5ILEtBQUs2RyxTQUFTbEYsWUFBY3VGLEVBQzVCbEgsS0FBSzhHLFFBQVFuRixZQUFjd0YsQ0FDN0IsR0RrSDRCLENBQzVCTixTQUFVLGlCQUNWQyxRQUFTLHVCQVVMTSxFQUFTLENBQ2JyRixhQUFjLHVCQUNkRSxjQUFlLDJCQUNmRSxjQUFlLHlCQUNmRSxlQUFnQix5QkFDaEJFLFdBQVksZ0JBQ1pFLFlBQWEsaUJBQ2JFLFVBQVcsZ0JBR1AwRSxFQUFvQixJQUFJQyxFQUFjRixFQUFRZCxHQUM5Q2lCLEVBQW1CLElBQUlELEVBQWNGLEVBQVFmLEdBRW5EZ0IsRUFBa0JuRCxtQkFDbEJxRCxFQUFpQnJELG1CQUVqQixNQUFNc0QsRUFBVyxJQUFJeEMsRUFBYyxTQUFVcEYsSUFDM0NnSCxFQUFTSyxZQUFZckgsRUFBS00sS0FBTU4sRUFBSzZILFVBRXJDRCxFQUFTaEQsT0FBTyxJQUdaa0QsRUFBVSxJQUFJMUMsRUFBYyxRQUFTcEYsSUFDekMsTUFLTStILEVBQU9DLEVBTE8sQ0FDbEIxSCxLQUFNTixFQUFLaUksTUFDWHpILEtBQU1SLEVBQUtRLE9BS2IwSCxFQUFZQyxRQUFRSixHQUNwQkQsRUFBUWxELE9BQU8sSUFHakJrRCxFQUFRM0Msb0JBQ1J5QyxFQUFTekMsb0JBRVQsTUFBTWlELEVBQWUsSUU5S04sY0FBNkIxRCxFQUMxQzNFLFlBQVlzRixHQUNWRSxNQUFNLENBQUV0RixTQUFVb0YsSUFFbEJqRixLQUFLaUksU0FBV2pJLEtBQUtLLGNBQWNnQixjQUFjLG1CQUNqRHJCLEtBQUtrSSxPQUFTbEksS0FBS0ssY0FBY2dCLGNBQWMsd0JBQ2pELENBQ0FvRCxLQUFLMEQsRUFBUy9ILEdBQ1pKLEtBQUtpSSxTQUFTdEcsWUFBY3dHLEVBQzVCbkksS0FBS2tJLE9BQU96RyxJQUFNckIsRUFDbEJKLEtBQUtrSSxPQUFPeEcsSUFBTSxZQUFjeUcsRUFDaENoRCxNQUFNVixNQUNSLEdGa0tzQyxZQUd4QyxTQUFTbUQsRUFBV2hJLEdBQ2xCLE9BQU8sSUFBSXdJLEVBQUt4SSxFQUFNK0csRUFBYyxDQUNsQzVHLGlCQUFrQkEsQ0FBQ0csRUFBTUUsS0FDdkI0SCxFQUFhdkQsS0FBS3ZFLEVBQU1FLEVBQUssSUFFOUJvQixZQUNMLENBUkF3RyxFQUFhakQsb0JBVWIsTUFBTStDLEVBQWMsSUczTEwsTUFDYm5JLFlBQVdHLEVBQXNCRCxHQUFVLElBQS9CLE1BQUV3SSxFQUFLLFNBQUVDLEdBQVV4SSxFQUM3QkUsS0FBS3VJLGVBQWlCRixFQUN0QnJJLEtBQUt3SSxVQUFZRixFQUNqQnRJLEtBQUt5SSxXQUFhckgsU0FBU0MsY0FBY3hCLEVBQzNDLENBRUE2SSxjQUNFMUksS0FBS3VJLGVBQWV0RSxTQUFTMEUsSUFDM0IzSSxLQUFLd0ksVUFBVUcsRUFBSyxHQUV4QixDQUVBWixRQUFRYSxHQUNONUksS0FBS3lJLFdBQVdJLFFBQVFELEVBQzFCLEdINktBLENBQ0VQLE1BQU92QyxFQUNQd0MsU0FBV0ssSUFDVCxNQUFNRyxFQUFjbEIsRUFBV2UsR0FFL0JiLEVBQVlDLFFBQVFlLEVBQVksR0FHcEMsVUFHRmhCLEVBQVlZLGNBR1puQyxFQUF3QjlGLGlCQUFpQixTQUFTLEtBQ2hENEcsRUFBa0JoRCxrQkF2RXBCLFdBQ0UsTUFBTSxLQUFFbkUsRUFBSSxJQUFFOEcsR0FBUUosRUFBU0csY0FFL0JMLEVBQWVxQyxhQUFhLFFBQVM3SSxHQUNyQ3VHLEVBQWNzQyxhQUFhLFFBQVMvQixFQUN0QyxDQW1FRWdDLEdBRUF4QixFQUFTL0MsTUFBTSxJQUdqQitCLEVBQVUvRixpQkFBaUIsU0FBUyxLQUNsQzhHLEVBQWlCbEQsa0JBQ2pCcUQsRUFBUWpELE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBzZWxlY3RvciwgeyBoYW5kbGVJbWFnZUNsaWNrIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fcG9wVXBFbGVtZW50ID0gc2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUljb24uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9kZWxldGVDYXJkLmJpbmQodGhpcykpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluaylcbiAgICApO1xuICB9XG5cbiAgX2hhbmRsZUxpa2VJY29uKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYWN0aXZlXCIpO1xuICB9XG5cbiAgX2RlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcFVwRWxlbWVudClcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuICBnZXRFbGVtZW50KCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlXCIpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGVcIik7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBgcGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RleHRcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JDb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW52YWxpZElucHV0ID0gc2VsZWN0b3JDb25maWcuaW52YWxpZElucHV0O1xuICAgIHRoaXMuX2FjdGl2YXRlRXJyb3IgPSBzZWxlY3RvckNvbmZpZy5hY3RpdmF0ZUVycm9yO1xuICAgIHRoaXMuX2Zvcm1UeXBlRXJyb3IgPSBzZWxlY3RvckNvbmZpZy5mb3JtVHlwZUVycm9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uID0gc2VsZWN0b3JDb25maWcuaW5hY3RpdmVCdXR0b247XG4gICAgdGhpcy5fbW9kYWxJbnB1dCA9IHNlbGVjdG9yQ29uZmlnLm1vZGFsSW5wdXQ7XG4gICAgdGhpcy5fbW9kYWxCdXR0b24gPSBzZWxlY3RvckNvbmZpZy5tb2RhbEJ1dHRvbjtcbiAgICB0aGlzLl9tb2RhbEZvcm0gPSBzZWxlY3RvckNvbmZpZy5tb2RhbEZvcm07XG5cbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW52YWxpZElucHV0KTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fYWN0aXZhdGVFcnJvcik7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcblxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2FjdGl2YXRlRXJyb3IpO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2ludmFsaWRJbnB1dCk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbik7XG5cbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b24pO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9tb2RhbElucHV0KVxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbW9kYWxCdXR0b24pO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgc2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcFVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wVXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcFVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYW5kbGVPdmVybGF5Q2xpY2soZXZ0KSB7XG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9wb3BVcEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9wb3BVcEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2soZXZ0KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IHNlbGVjdG9yOiBwb3B1cFNlbGVjdG9yIH0pO1xuXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG5cbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3BVcEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXG4gICAgKTtcblxuICAgIGNvbnN0IGRhdGEgPSB7fTtcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGRhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5cbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcblxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5cbi8qXG5XZWJwYWNrIGltYWdlIGltcG9ydCB0aGluZ3lzXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiovXG5pbXBvcnQgbG9nbyBmcm9tIFwiLi4vaW1hZ2VzL2Fyb3VuZFVTLnN2Z1wiO1xuaW1wb3J0IGF2YXRhckltYWdlIGZyb20gXCIuLi9pbWFnZXMvamFjcXVlcy1jb3VzdGVhdS5qcGdcIjtcbmltcG9ydCBjbG9zZSBmcm9tIFwiLi4vaW1hZ2VzL0Nsb3NlSWNvbi5zdmdcIjtcblxuY29uc3QgbG9nb0ltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2dvXCIpO1xuXG5sb2dvSW1hZ2Uuc3JjID0gbG9nbztcblxuY29uc3QgcHJvZmlsZVBpY3R1cmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZwaWNcIik7XG5wcm9maWxlUGljdHVyZS5zcmMgPSBhdmF0YXJJbWFnZTtcblxuY29uc3QgY2xvc2VQcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmV2aWV3LWNsb3NlXCIpO1xuY2xvc2VQcmV2aWV3LnNyYyA9IGNsb3NlO1xuXG5jb25zdCBjbG9zZUVkaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtY2xvc2VcIik7XG5jbG9zZUVkaXQuc3JjID0gY2xvc2U7XG5cbmNvbnN0IGNsb3NlQWRkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtY2xvc2VcIik7XG5jbG9zZUFkZC5zcmMgPSBjbG9zZTtcblxuLypcbkNhcmRzXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiovXG5pbXBvcnQgeW9zZSBmcm9tIFwiLi4vaW1hZ2VzL3lvc2VtaXRlLXZhbGxleS5qcGdcIjtcbmltcG9ydCBsYWtlIGZyb20gXCIuLi9pbWFnZXMvbGFrZS1sb3Vpc2UucG5nXCI7XG5pbXBvcnQgYmFsZCBmcm9tIFwiLi4vaW1hZ2VzL2JhbGQtbW91bnRhaW5zLnBuZ1wiO1xuaW1wb3J0IGxhdGVtYXIgZnJvbSBcIi4uL2ltYWdlcy9sYXRlbWFyLnBuZ1wiO1xuaW1wb3J0IG5hdCBmcm9tIFwiLi4vaW1hZ2VzL3Zhbm9pc2UtbmF0aW9uYWwtcGFyay5wbmdcIjtcbmltcG9ydCBsYWdvIGZyb20gXCIuLi9pbWFnZXMvbGFnby1kaS1icmFpZXMucG5nXCI7XG5cbmNvbnN0IGNhcmQxID0ge1xuICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICBsaW5rOiB5b3NlLFxufTtcblxuY29uc3QgY2FyZDIgPSB7XG4gIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgbGluazogbGFrZSxcbn07XG5cbmNvbnN0IGNhcmQzID0ge1xuICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gIGxpbms6IGJhbGQsXG59O1xuXG5jb25zdCBjYXJkNCA9IHtcbiAgbmFtZTogXCJMYXRlbWFyXCIsXG4gIGxpbms6IGxhdGVtYXIsXG59O1xuXG5jb25zdCBjYXJkNSA9IHtcbiAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgbGluazogbmF0LFxufTtcblxuY29uc3QgY2FyZDYgPSB7XG4gIG5hbWU6IFwiTGFnbyBEaSBCcmFpZXNcIixcbiAgbGluazogbGFnbyxcbn07XG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbY2FyZDEsIGNhcmQyLCBjYXJkMywgY2FyZDQsIGNhcmQ1LCBjYXJkNl07XG5cbmNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc1wiKTtcbi8qXG4gICAgICAgICAgICAgICAgICAgICAgUE9QVVBTXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiovXG5cbmNvbnN0IHByb2ZpbGVBZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtZm9ybVwiKTtcblxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWZvcm1cIik7XG5cbi8qXG4gICAgICAgICAgICAgICAgICAgICAgQlVUVE9OU1xuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXG4qL1xuXG5jb25zdCBvcGVuUHJvZmlsZUVkaXRvckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdFwiKTtcblxuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGRcIik7XG5cbi8qXG4gICAgICAgICAgICAgICAgICAgICAgSU5QVVRTXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiovXG5cbmNvbnN0IGpvYklucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N1YnRpdGxlXCIpO1xuXG5jb25zdCBuYW1lSW5wdXRGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0XCIpO1xuXG5jb25zdCB0aXRsZUlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RpdGxlXCIpO1xuXG5jb25zdCBsaW5rSW5wdXRGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlua1wiKTtcblxuLypcbiAgICAgICAgICAgICAgICAgICAgICBTRVRUSU5HIFRFWFQgVkFMVUVTXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiovXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmNvbnN0IHN1YnRpdGxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIik7XG5cbi8qXG4gICAgICAgICAgICAgICAgICAgICAgVGVtcGxhdGVcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuKi9cblxuY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjY2FyZF9fdGVtcGxhdGVcIjtcbi8qXG4gICAgICAgICAgICAgICAgICAgICAgRlVOQ1RJT05TXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiovXG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWU6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgdXNlckpvYjogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcbn0pO1xuXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuXG4gIG5hbWVJbnB1dEZpZWxkLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIG5hbWUpO1xuICBqb2JJbnB1dEZpZWxkLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIGpvYik7XG59XG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgaW52YWxpZElucHV0OiBcIm1vZGFsX19pbnB1dC1pbnZhbGlkXCIsXG4gIGFjdGl2YXRlRXJyb3I6IFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXG4gIGZvcm1UeXBlRXJyb3I6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBpbmFjdGl2ZUJ1dHRvbjogXCJtb2RhbF9fYnV0dG9uLWluYWN0aXZlXCIsXG4gIG1vZGFsSW5wdXQ6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBtb2RhbEJ1dHRvbjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBtb2RhbEZvcm06IFwiLm1vZGFsX19mb3JtXCIsXG59O1xuXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUVkaXRGb3JtKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHByb2ZpbGVBZGRGb3JtKTtcblxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGVkaXRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjZWRpdFwiLCAoZGF0YSkgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuc3VidGl0bGUpO1xuXG4gIGVkaXRGb3JtLmNsb3NlKCk7XG59KTtcblxuY29uc3QgYWRkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2FkZFwiLCAoZGF0YSkgPT4ge1xuICBjb25zdCBjcmVhdGVkQ2FyZCA9IHtcbiAgICBuYW1lOiBkYXRhLnRpdGxlLFxuICAgIGxpbms6IGRhdGEubGluayxcbiAgfTtcblxuICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChjcmVhdGVkQ2FyZCk7XG5cbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkKTtcbiAgYWRkRm9ybS5jbG9zZSgpO1xufSk7XG5cbmFkZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGltYWdlUHJldmlldyA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3XCIpO1xuaW1hZ2VQcmV2aWV3LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xuICByZXR1cm4gbmV3IENhcmQoZGF0YSwgY2FyZFNlbGVjdG9yLCB7XG4gICAgaGFuZGxlSW1hZ2VDbGljazogKG5hbWUsIGxpbmspID0+IHtcbiAgICAgIGltYWdlUHJldmlldy5vcGVuKG5hbWUsIGxpbmspO1xuICAgIH0sXG4gIH0pLmdldEVsZW1lbnQoKTtcbn1cblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XG5cbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmNhcmRzXCJcbik7XG5cbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbi8vT3BlbiBwb3B1cCBldmVudCBsaXN0ZW5lclxub3BlblByb2ZpbGVFZGl0b3JCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGZpbGxQcm9maWxlRm9ybSgpO1xuXG4gIGVkaXRGb3JtLm9wZW4oKTtcbn0pO1xuXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgYWRkRm9ybS5vcGVuKCk7XG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZSwgdXNlckpvYiB9KSB7XG4gICAgdGhpcy51c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWUpO1xuICAgIHRoaXMudXNlckpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4geyBuYW1lOiB0aGlzLnVzZXJOYW1lLnRleHRDb250ZW50LCBqb2I6IHRoaXMudXNlckpvYi50ZXh0Q29udGVudCB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8obmV3TmFtZSwgbmV3Sm9iKSB7XG4gICAgdGhpcy51c2VyTmFtZS50ZXh0Q29udGVudCA9IG5ld05hbWU7XG4gICAgdGhpcy51c2VySm9iLnRleHRDb250ZW50ID0gbmV3Sm9iO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHNlbGVjdG9yOiBwb3B1cFNlbGVjdG9yIH0pO1xuXG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMuX3BvcFVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wVXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIik7XG4gIH1cbiAgb3BlbihjYXB0aW9uLCBsaW5rKSB7XG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IGNhcHRpb247XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBcInBob3RvIG9mIFwiICsgY2FwdGlvbjtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImNvbnN0cnVjdG9yIiwiZGF0YSIsInNlbGVjdG9yIiwiX3JlZiIsImhhbmRsZUltYWdlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3BvcFVwRWxlbWVudCIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiYmluZCIsIl9kZWxldGVCdXR0b24iLCJfZGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2UiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfZWxlbWVudCIsInJlbW92ZSIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRFbGVtZW50Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJzZWxlY3RvckNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2ludmFsaWRJbnB1dCIsImludmFsaWRJbnB1dCIsIl9hY3RpdmF0ZUVycm9yIiwiYWN0aXZhdGVFcnJvciIsIl9mb3JtVHlwZUVycm9yIiwiZm9ybVR5cGVFcnJvciIsIl9pbmFjdGl2ZUJ1dHRvbiIsImluYWN0aXZlQnV0dG9uIiwiX21vZGFsSW5wdXQiLCJtb2RhbElucHV0IiwiX21vZGFsQnV0dG9uIiwibW9kYWxCdXR0b24iLCJfbW9kYWxGb3JtIiwibW9kYWxGb3JtIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJhZGQiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0TGlzdCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiUG9wdXAiLCJrZXkiLCJjbG9zZSIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZU92ZXJsYXlDbGljayIsInRhcmdldCIsImNvbnRhaW5zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwicG9wdXBTZWxlY3RvciIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0TGlzdCIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsImdldEVsZW1lbnRCeUlkIiwibG9nbyIsImF2YXRhckltYWdlIiwiaW5pdGlhbENhcmRzIiwieW9zZSIsImxha2UiLCJiYWxkIiwibGF0ZW1hciIsIm5hdCIsImxhZ28iLCJwcm9maWxlQWRkRm9ybSIsInByb2ZpbGVFZGl0Rm9ybSIsIm9wZW5Qcm9maWxlRWRpdG9yQnV0dG9uIiwiYWRkQnV0dG9uIiwiam9iSW5wdXRGaWVsZCIsIm5hbWVJbnB1dEZpZWxkIiwiY2FyZFNlbGVjdG9yIiwidXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwibmV3TmFtZSIsIm5ld0pvYiIsImNvbmZpZyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJlZGl0Rm9ybSIsInN1YnRpdGxlIiwiYWRkRm9ybSIsImNhcmQiLCJjcmVhdGVDYXJkIiwidGl0bGUiLCJjYXJkU2VjdGlvbiIsImFkZEl0ZW0iLCJpbWFnZVByZXZpZXciLCJfY2FwdGlvbiIsIl9pbWFnZSIsImNhcHRpb24iLCJDYXJkIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZEVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJmaWxsUHJvZmlsZUZvcm0iXSwic291cmNlUm9vdCI6IiJ9